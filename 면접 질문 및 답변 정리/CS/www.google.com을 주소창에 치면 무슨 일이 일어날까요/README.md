# www.google.com을 주소창에 치면 무슨 일이 일어날까요?

**요약**

```
리다이렉트,캐싱,DNS IP라우팅와 ARP, TCP연결 구축을 거쳐 요청,응답이 일어나는 TTFB(Time to First Byte)가 시작되고 이 후 컨텐츠를 다운받게 되고 이 후 브라우저 렌더링 과정을 거쳐 구글이라는 화면이 나타나게 됩니다.
```

### 리다이렉트

리다이렉트가 있다면 리다이렉트를 진행하고 없다면 그대로 해당요청에 대한 과정이 진행됨.

### 캐싱

해당 요청이 캐싱이 가능한지 가능하지 않은지 파악, 캐싱이 이미 된 요청이라면 캐싱된 값을 반환하며 캐싱이 이미 된 요청이라면 캐싱된 값을 반환하며 캐싱이 되지 않은 새로운 요청이라면 그 다음 단계로 넘어감 캐싱은 요청된 값의 결과 값을 저장 하고 그 값을 다시 요청하면 다시 제공하는 기술.
이는 브라우저 캐시와 공유캐시로 나뉨

#### 1) 브라우저 캐시

브라우저 캐시는 쿠키,로컬 스토리지 등을 포함한 캐시. 개인캐시라 부름
브라우저 자체가 사용자가 HTTP를 통해 다운로드 하는 모든 문서를 보유하는것을 말함.

예를들어 어떤 사이트를 갔다가 다시 방문하면 굉장히 빠르게 컨텐츠가 나타남. 그것이 브라우저 캐시 인터넷 사용기록을 삭제하고싶어서 누르려고 하면 쿠키및 기타 사이트 데이터 캐시

#### 2) 공유 캐시

공유캐시는 클라이언트와 서버사이에 있으며 사용자간에 공유할 수있는 응답을 저장할 수있다.

대표적인 예로 요청한 서버 앞단에 프록시 서버가 캐싱하는것을 말함. 이를리버스 프록시를 둬서 내부서버로 포워드한다고도 말함.

### DNS

DNS (Domain Name System)은 계층적인 도메인 구조와 분산된 데이터베이스를 이용한 시스템으로 FQDN을 인터넷 프로토콜인 IP로 바꿔주는 시스템이다. 이는 DNS관련요청을 네임서버로 전달하고 해당응답값을 클라이언트에게 전달하는 리졸버, 도메인을 IP로 변환하는 네임서버 등으로 이루어져 있다.

```
FQDN(Fully Qualified Domain Name)은 호스트와 도메인이 합쳐진 완전한 도메인 이름을 말함.
www등은 호스트 부분이며 google.com은 도메인이라고 한다.
www.google.com >> IP
```

### IP 라우팅

해당 IP를 기반으로 라우팅,ARP과정(IP주소를 MAC주소로 변환)을 거쳐 실제 서버를 찾음

### TCP연결구축

브라우저가 TCP 3way 핸드셰이크및 SSL연결등을통해 연결을 설정 이후 요청을 보낸 후 해당 요청한 서버로부터 응답을 받는다.

### 콘텐츠 다운로드

요청한 컨텐츠를 서버로부터 다운받음 이 컨텐츠를 처음 받기 시작할때를 TTFB(Time to First Byte)

### 브라우저 렌더링

1. DOM트리 구축, CSSOM트리 구축

- HTML을 파싱하여 DOM 노드를 만든다. 이 DOM 노드들을 병합하여 DOM 트리를 만든다.
- CSS를 파싱하여, CSSOM(CSS Object Model) 트리를 만들게 된다.
- CSS파싱 과정은 바이트 > 문자 > 토큰 > 노드 > CSSOM 생성 순으로 HTML의 파싱과정과 동일하다.

2. 렌더트리 구축
   CSSOM 트리와 DOM 트리를 결합하여, 표시해야 할 순서로 내용을 그려낼 수 있도록 하기 위해 렌더 트리를 형성한다. 이 과정을 Attachment라고 한다.

3. 렌더트리 배치
   렌더 트리가 생성되고, 기기의 뷰포트 내에서 렌더 트리의 노드가 정확한 위치와 크기를 계산한다 과정을 배치(Layout) 또는 Reflow 라고 한다.

4. 렌더 트리 그리기
   렌더 트리의 각 노드를 화면의 실제 픽셀로 나타낼 때 Painting메서드가 호출된다. Painting 과정 후 브라우저 화면에 UI가 나타나게 된다.

## Reference

https://www.youtube.com/watch?v=YahjHM9UNCA
