# 프론트 보안 관련 공격해서 종류에 대해 설명해 주세요

## XSS

웹 페이지에 악성 자바스크립트를 삽입하는 공격하는 것. 사이트 이용자의 정보를 손쉽게 탈취할 수 있다. 인증 관리를 위해 토큰은 Cookie 혹은 localStorage에 저장하는 경우가 많은데,이때 XSS 방어 준비가 되어있지 않은 경우 자바스크립트를 통해 불특정 다수의 사용자 토큰을 손쉽게 탈취 할 수 있다

- Stored XSS
- Reflected XSS: 입력을 그대로 브라우저에 출력하는 로직을 공격하는 방법
- DOM Based XSS: 서비스의 스크립트를 이용하여 DOM에 악의적인 스크립트가 노출되도록 공격하는 방법 서버를 타지않고 DOM을 조작할 수 있기 때문에 문제를 찾기 힘들다

### XSS 방어법

#### 서버에 데이터를 저장할 때 HTML 필터링을 한 후 데이터베이스에 저장한다.

ex) <, >, script, style, &, /, ...

#### Reflected XSS나 DOM Based XSS 공격 방어를 위해 서버에서 파라미터 검증

Reflected XSS방어법: 서버 파라미터 검증과 프론트엔드 필터링을 통해 방어할 수 있다.

## CSRF Attack

Cross-Site Request Forger
공격자가 서비스 사용자를 이용하여 요청을 보내는 공격.
인증된 사용자의 권한을 사용해 악의적인 요청을 전송하는 공격입니다. 흔히 이메일이나 이미지 태그를 이용해 공격자의 서버로 요청을 전송합니다.

### CSRF Attack 방어법

#### CSRF Token

모든 요청에 토큰을 발급하여 서버에서 검증하는 방어 방법이다. 발급된 토큰을 서버로 전달하지 않으면 요청이 허락되지 않기 때문에 효과적이다.

#### CAPTCHA

캡챠는 사람이 요청한 것이 맞는지 검증하는 방법이지만 CSRF 공격에도 효과적이다. 사실상 CSRF Token이 하는 것과 똑같고 겸사겸사 로봇 여부 확인도 가능하다.

#### Referer Check(노추천)

- HTTP Referer를 확인하여 허용된 Referer의 요청만 허락하도록 설정하는 방어 방법이다. 단, HTTP 변조를 통해 쉽게 뚫을 수 있으므로 추천하지 않는다.

## File Upload Attack

공격 스크립트가 담긴 파일을 서버로 업로드하는 공격.WebShell이 가능한 코드가 담긴 파일을 업로드하고 해커가 URL을 통해 접근 가능해지면 Command Injection과 같은 효과를 볼 수 있다.

### File Upload Attack방어방법

- 확장자와 파일 타입을 검사하여 허락된 타입만 저장한다.
- 해커가 파일을 찾을 수 없도록 업로드 파일의 이름과 확장자를 난수화하여 저장한다.
- 특수 문자가 포함된 경우 업로드를 막는다. (Null byte Injection 방지)

## JavaScript Injection

브라우저에서 자바스크립트를 삽입시키는 공격.브라우저에서 제공하는 Console을 통해 조작 가능
Client-Side에 민감한 데이터를 넣어놨다면 JavaScript Injection 공격을 통해 탈취가 가능

### JavaScript Injection 방어방법

- 클라이언트엔 민감한 데이터를 절대 Plain하게 넣지 않는다.
- 데이터 유효성 검사가 필요한 경우 서버에서 처리하도록 한다.

## 클릭재킹

사용자는 어떤 웹 페이지를 클릭하지만 실제로는 다른 어떤 페이지의 컨텐츠를 클릭하게 되는 것이다. 대표적인 방법으로는 정상적인 버튼 밑에 해킹 기능을 넣은 보이지 않는 버튼을 배치하는 것이다.

### 클릭재킹 방어방법

1. X-Frame-Options 헤더 사용: X-Frame-Options 헤더를 사용하여 웹페이지가 frame이나 iframe 안에서 로드되는 것을 방지할 수 있습니다. 이를 통해 다른 도메인에서 해당 페이지를 프레임에 넣어 클릭재킹을 시도하는 것을 방지할 수 있습니다.

2. Content Security Policy (CSP): CSP를 사용하여 허용된 소스만이 웹페이지를 프레임에 넣도록 할 수 있습니다.

3. JavaScript를 통한 방어: 클라이언트 측에서 JavaScript를 사용하여 클릭 재킹을 방어할 수 있습니다. 예를 들어, 페이지가 자신의 최상위 창에서 로드되었는지 확인하고 그렇지 않으면 자동으로 리디렉션하는 방법을 사용할 수 있습니다.

## Reference

https://kciter.so/posts/basic-web-hacking#file-upload-attack
