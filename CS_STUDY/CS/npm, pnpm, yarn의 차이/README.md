# 패키지 매니저란?

자바스크립트 패키지 매니저는 자바스크립트 프로젝트에서 사용되는 의존성 관리 도구.
패키지 매니저는 프로젝트에 필요한 외부 라이브러리, 모듈, 플러그인 등을 손쉽게 설치하고 관리하는 역할

## 선요약

```
빠르고 효율적인 패키지 매니저를 원한다면 pnpm
방대한 패키지 생태계와 사용 편의성을 원한다면 npm
npm보다 빠르고 안정적이며 향상된 의존성 관리 기능을 원한다면 yarn
```

## 자바스크립트 패키지 매니저의 주요 기능

### 패키지 설치

패키지 매니저를 사용하여 프로젝트에 필요한 패키지를 설치할 수 있다. 패키지는 일반적으로 오픈 소스 라이브러리이며, 패키지 매니저를 통해 패키지의 이름 또는 버전을 지정하여 설치할 수 있다.

### 의존성 관리

패키지 매니저는 프로젝트의 의존성을 관리한다. 패키지는 다른 패키지에 의존할 수 있으며, 패키지 매니저는 이러한 의존성을 자동으로 해결하여 필요한 패키지들을 설치한다.

### 버전 관리

패키지 매니저는 패키지의 다양한 버전을 관리한다. 이를 통해 특정 버전의 패키지를 설치하거나 업데이트할 수 있으며, 프로젝트가 정확한 버전의 패키지를 사용하도록 보장할 수 있다.

### 스크립트 실행

패키지 매니저는 프로젝트에 미리 정의된 스크립트를 실행하는 기능을 제공한다. 이를 통해 빌드, 테스트, 배포 등의 자동화된 작업을 수행할 수 있다.

## npm (Node Package Manager)

Node.js 생태계의 가장 대표적인 패키지 매니저.

- node.js에 내장이 되어 있기 때문에 추가적인 설치가 필요하지 않다.
- 다른 사용자들이 만들어 놓은 다양한 모듈이 있기 때문에 이를 다운로드로 쉽게 사용할 수 있다
- 가장 오래되고 많이 사용되는 패키지 매니저인 만큼 생태계가 굉장히 풍부
- 패키지 설치 시 패키지들을 각각 별도로 설치한다. 이로 인해 공유된 의존성이 중복으로 설치될 수 있다. 의존성 트리가 깊어질수록 패키지 설치 속도가 느려지고, 디스크 공간을 많이 차지할 수 있다.
- npm의 경우 패키지들을 서로 의존하도록 하기 때문에 만약 하나의 문제가 발생한다면 다른 것들에도 문제가 발생할 수 있다는 단점
- 설치 속도가 느릴 수 있다.
- 디스크 공간 사용량이 많을 수 있다.

## pnpm(performant npm)

- pnpm 제작자들이 생각한 npm 과 yarn의 가장 큰 문제는 프로젝트 간에 사용되는 dependencies의 중복 저장이다
- npm의 의존성 문제를 해결하기 위해 고안된 패키지 매니저로, 고유 설치와 플랫 노드 모듈을 통해 의존성 관리를 최적화한다.

- pnpm은 이러한 호이스트 방식 대신, 다른 dependencies를 해결하는 전략인 content-addressable storage를 사용했다. 이 방법을 사용하면, home 폴더의 글로벌 저장소 (~/.pnpm-store)에 패키지를 저장하는 중첩된 node_modules 폴더가 생성된다. 따라서 모든 버전의 dependencies은 해당 폴더에 물리적으로 한번만 저장되므로, single source of truth를 구성하고, 상당한 디스크 공간을 절약할 수 있다.

- pnpm의 경우에는 프로젝트별로 node_modules에 매번 패키지를 설치했던 것과는 달리 global 저장소에 패키지를 한 번만 저장함으로써 저장 공간을 절약할 수 있다는 아주 큰 장점을 가지고 있다. pnpm을 사용한다면 똑같은 라이브러리를 중복해서 설치할 필요가 없다.

- 다만, 주의할 점은 특정 패키지를 한 번만 설치하기 때문에 프로젝트별로 연결을 해놓으면 호환 문제가 발생할 수 있다. 따라서 프로젝트끼리 호한 문제가 발생하지 않도록 버전 관리를 반드시 해줄 필요가 있다.

- pnpm 또한 체크섬을 활용하여 패키지의 무결성을 확인한다. pnpm은 npm과 yarn classic에서 이슈가 되는 패키지 호이스팅을 하지 않기 때문에 이러한 문제를 피한다. 이 대신, 위험한 dependency 액세스의 위험성을 제거하는 내부에 중첩된 node_modules폴더를 생성한다. 즉, dependency가 package.json 에서 명시적으로 선언된 경우에만 다른 dependency에 액세스 할 수 있다.

## yarn

Facebook에서 개발한 패키지 매니저로, npm과 비슷한 목적을 가지고 있다. npm의 단점을 보완하고, 더 나은 성능과 안정성을 제공하며, 여러 개의 패키지를 순차적으로 설치를 하는 것이 아니라 병렬로 설치하여 빠른 속도를 보장한다.

- npm과 큰 차이점은 보안이다.'yarn.lock'에 지정된 체크섬을 활용하여 각 패키지의 무결성을 확인하고, 또한 package.json 내부에 선언되지 않은 의심스러운 패키지가 존재하면 설치가 중단한다.

- 여러 패키지를 동시에 가져오고 설치하도록 최적화되어 있어 npm보다 빠른 의존성 설치 속도와 패키지 버전 관리를 제공한다. yarn.lock 파일을 사용하여 의존성 트리를 고정시켜 재현 가능한 빌드를 지원한다. 캐시 기능을 제공하여 패키지 다운로드를 최적화한다.

## Reference

https://www.jeong-min.com/42-package-manager/

https://velog.io/@sebinn/%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%A7%A4%EB%8B%88%EC%A0%80-%EB%B9%84%EA%B5%90-npm-yarn-pnpm

https://pnpm.io/ko/installation

https://yceffort.kr/2022/05/npm-vs-yarn-vs-pnpm#%EB%A7%8E%EC%9D%80-%ED%98%81%EB%AA%85%EC%9D%84-%EA%B0%80%EC%A0%B8%EC%98%A8-yarn-classic
