# Compound 패턴

Compound Component Pattern은 자식 컴포넌트들이 부모 컴포넌트 내부의 상태를 공유하면서 비지니스 로직과 사용자 인터페이스와 관련된 부분을 구분하는 React 패턴입니다.
Compound 컴포넌트 패턴은 여러 개의 작은 컴포넌트들이 각각의 역할을 분담하도록 하고 이를 조립해서 하나의 큰 컴포넌트를 만드는 것이라고 할 수 있습니다.

이때 부모와 자식 컴포넌트 간의 상태 공유를 할 때 React Context API를 주로 많이 사용한다.
컴파운드 컴포넌트 패턴으로 코드를 작성하기 위해서는 기본적으로 4단계의 과정을 거칩니다.

1. 컨텍스트를 생성.
2. 부모 컴포넌트 코드를 작성.
3. 자식 컴포넌트 코드를 작성.
4. 자식 컴포넌트를 부모컴포넌트의 프로퍼티로 할당.

## React.Children.map

자식 컴포넌트들을 순회 처리 하는데에도 컴파운드 패턴을 사용가능.
`React.cloneElement`를 사용하여 자식 컴포넌트를 복제하여 각각에게 메서드를 넘길 수 있다.

## Compound 컴포넌트 패턴의 장점

- Compound 컴포넌트를 사용할 때 개발자가 필요로 하는 자식 컴포넌트만 합성하여 사용할 수 있기 때문에 개발자에게 자율성을 줄 수 있다
- 하나의 컴포넌트 안에 수많은 Props를 한꺼번에 전달하지 않고 서브 컴포넌트에 적절히 분배하여 관심사를 분리할 수 있다
- Compound 컴포넌트를 import할 때, 해당 컴포넌트에 필요한 자식 컴포넌트를 명시적으로 import할 필요도 없다.

## Compound 컴포넌트 패턴의 단점

- UI에 대한 자유도가 높은만큼 컴포넌트의 의도대로 합성되지 않을 수도 있고 Compound 컴포넌트 패턴을 사용하지 않았을 때보다 JSX 소스 코드 길이가 길어질 수 있다는 단점 존재
- 내부에서 React.Children.map을 사용하고 있기 때문에 쓰는 쪽에서 자식 컴포넌트를 약속된 형태로 넘겨야 하는 제약이 생김.엘리먼트를 복제하는 경우. 복제 대상 컴포넌트가 기존에 갖고 있는 prop과 이름이 충돌될 수 있다. 이 경우 React.cloneElement를 사용할 때 넘어간 값으로 해당 prop은 덮어써질 단점이 존재.
- 오직 부모 컴포넌트의 직접적인 자식들만 props에 대한 접근성이 생기므로, 이 컴포넌트를 다른 어떠한 컴포넌트로도 감쌀 수 없게 된다.

따라서 사용자(개발자)에게 어떤 인터페이스를 열어줄 것인지, 어떤 옵션을 선택할 수 있게 할 것인지 충분히 고민하고 구현해야 합니다.

## Reference

https://patterns-dev-kr.github.io/design-patterns/compound-pattern/

https://iyu88.github.io//react/2023/03/25/react-compound-component-pattern.html

https://namunamu1105.medium.com/%EB%A6%AC%EC%95%A1%ED%8A%B8-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-2%EA%B0%80%EC%A7%80-4917ee8c8690
